<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Combine Text Files</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
    <style>
      .container {
        max-width: 700px;
        margin: 2rem auto;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(44, 62, 80, 0.08);
        padding: 2rem;
      }
      .form-group {
        margin-bottom: 1.5rem;
      }
      label {
        font-weight: bold;
        display: block;
        margin-bottom: 0.5rem;
      }
      input[type="file"] {
        margin-bottom: 1rem;
      }
      textarea {
        width: 100%;
        min-height: 250px;
        resize: vertical;
        border-radius: 4px;
        border: 1px solid #ccc;
        padding: 0.75rem;
        font-size: 1rem;
        background: #f8f9fa;
      }
      button {
        background: #2c3e50;
        color: #fff;
        border: none;
        border-radius: 4px;
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
        cursor: pointer;
      }
      button:hover {
        background: #1a242f;
      }
      .success {
        color: green;
        margin-top: 1rem;
      }
      .error {
        color: red;
        margin-top: 1rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Combine Text Files</h1>
      <form method="post" enctype="multipart/form-data">
        <div class="form-group">
          <label for="text_files">Select text files to combine:</label>
          <input
            type="file"
            name="text_files"
            id="text_files"
            accept=".txt"
            multiple
            required
          />
        </div>
        <button type="submit">Combine</button>
      </form>
      {% if error %}
      <div class="error">{{ error }}</div>
      {% endif %} {% if combined_text is not none %}
    <form method="post" action="{{ url_for('combine_texts') }}">
        <div class="form-group">
            <label for="combined_text">Combined Text (editable):</label>
            <textarea id="combined_text" name="combined_text" style="width:100vw;max-width:100%;min-width:100%;box-sizing:border-box;">{{ combined_text }}</textarea>
        </div>
        <button type="submit" name="download_updated" value="1">Download Updated Text File</button>
    </form>
    {% if summary %}
    <details style="margin-top:1.5rem;">
        <summary style="cursor:pointer;font-weight:bold;">Show per-file line counts</summary>
        <ul>
            {% for fname, count in summary %}
                <li><b>{{ fname }}</b>: {{ count }} lines</li>
            {% endfor %}
        </ul>
    </details>
    {% endif %}
{% endif %}
{% if download_ready and download_id %}
    <div class="success">
        Combined file is ready.
        <a href="{{ url_for('download_combined', download_id=download_id) }}" download="combined.txt">Download Combined Text File</a>
    </div>
{% endif %}
    </div>
  </body>
</html>
    </div>
  </body>
</html>
      